<!DOCTYPE html>
<html>
  <head>
    <title>Boids Simulation</title>
    <script>
      window.onload = function () {
        const protocol = window.location.protocol === "https:" ? "wss:" : "ws:";
        const socket = new WebSocket(
          `${protocol}//${window.location.host}/api/boids`
        );

        socket.onmessage = function (event) {
          const data = JSON.parse(event.data);
          const svg = document.querySelector("svg");
          svg.innerHTML = data.boids_positions
            .map(
              (position) =>
                `<circle r="5" fill="black" cx="${position.x}" cy="${position.y}" />`
            )
            .join("");
        };
      };
    </script>
  </head>
  <body>
    <svg width="100vw" height="100vh"></svg>
  </body>
</html>
